<!doctype html><html lang=en-us><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=author content="Ranjib Dey"><link rel="shortcut icon" type=image/x-icon href=https://reef-pi.github.io/img/favicon.ico><title>Telemetry | reef-pi - An opensource reef tank controller based on Raspberry Pi</title><meta name=description content="Telemetry features in reef-pi allow users to capture, visualize and alert on sensor or controller health data. Telemetry functionality help in avoiding tank accidents due to equipment failure (such as a bad heater cooking up a reef tank) or to understand long-term trends in tank parameters. This guide will walk through the basic telemetry features and how to configure them. This guide assumes you have a running reef-pi controller already. Follow the general guides first if you do not have a working reef-pi installation."><link href=https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta2/dist/css/bootstrap.min.css rel=stylesheet integrity=sha384-BmbxuPwQa2lc/FVzBcNJ7UAyJxM6wuqIj61tLrc4wSX0szH/Ev+nYRRuWlolflfl crossorigin=anonymous><link rel="preload stylesheet" href=/css/main.min.css as=style><link rel=stylesheet type=text/css href=https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css><link rel=stylesheet type=text/css href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:200,400,200bold,400old"><link rel=stylesheet href=https://reef-pi.github.io/css/img.css><!--[if lt IE 9]><script src=https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js></script><script src=https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js></script><![endif]--><script type=application/javascript>var doNotTrack=false;if(!doNotTrack){window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;ga('create','UA-102968086-1','auto');ga('send','pageview');}</script><script async src=https://www.google-analytics.com/analytics.js></script></head><body><div id=content><div class="container mb-3"><nav class="navbar navbar-expand-lg"><div class=container-fluid><a class=navbar-brand href=https://reef-pi.github.io/><span class=h3>reef-pi</span></a>
<button class=navbar-toggler type=button data-bs-toggle=collapse data-bs-target=#navbar aria-controls=navbar>
<i class="fa fa-bars"></i></button><div id=navbar class="collapse navbar-collapse"><ul class="navbar-nav ms-auto mb-2 mb-lg-0"><li class=nav-item><li><a class=nav-link href=/guides/>GUIDES</a></li></li><li class=nav-item><li><a class=nav-link href=/additional-documentation/>ADDITIONAL DOCUMENTATION</a></li></li></ul></div></div></div></nav><div class=container><h3 class=mt-3><b><a href=https://reef-pi.github.io/additional-documentation/telemetry/>Telemetry</a></b></h3><div class="blog-title my-4"><h6></h6></div><div class=panel><div class=panel-body><div class=blogpost><p>Telemetry features in reef-pi allow users to capture, visualize and alert on sensor or controller health data. Telemetry functionality help in avoiding tank accidents due to equipment failure (such as a bad heater cooking up a reef tank) or to understand long-term trends in tank parameters. This guide will walk through the basic telemetry features and how to configure them. This guide assumes you have a running reef-pi controller already. Follow the <a href=/guides/>general guides</a> first if you do not have a working reef-pi installation.</p><h3 id=sending-telemetry-data-to-adafruitio>Sending telemetry data to adafruit.io</h3><p>reef-pi allows emitting telemetry data to adafruit.io. The data can be used to visualize trends for longer periods (a month or two) over the internet (i.e. even outside home wifi where reef-pi UI is not accessible). Unlike the built-in dashboard, this data is persistent and does not go away when the controller is powered off. Following are the steps to setup Adafruit.io integration:</p><ol><li><p>Visit <a href=https://io.adafruit.com/>Adafruit.io</a> and sign up for an account.
<img src=/img/telemetry/aio-main.png alt=aio-main></p></li><li><p>Once you have an account, click on <strong>View AIO Key</strong> link on left panel to obtain your username and AIO Key
<img src=/img/telemetry/aio-main.png alt=aio-main></p></li><li><p>Next, enable telemetry in reef-pi under Configuration -> Telemetry tab. Select the <strong>Enable</strong> checkbox and specify adafruit.io username and AIO key. Click on update. And reload reef-pi.
<img src=/img/telemetry/telemetry-aio.png alt=telemtry-aio></p></li><li><p>After reload, reef-pi will start sending telemetry data to adafruit.io. reef-pi will automatically create specific feeds for temperature, equipment etc. Note, adafruit.io free accounts have feed number restrictions, other than per minute data limits. If you are building an all in one reef-pi controller and don&rsquo;t have aio plus subscription, do not enable adafruit io integration or use a separate controller for power bar and lighting (and disable adafruit.io integration), that should significantly reduce the number of feeds required and data emitted from the sensor only controller.</p></li><li><p>Once data is available on adafruit.io website under individual feeds, you can build dashboards for your reef tank.</p></li></ol><p><img src=/img/telemetry/aio-dash.png alt=telemetry-aio-dash></p><h3 id=setting-up-email-alerts>Setting up email alerts</h3><p>Email alerts are useful when certain sensor data or conroller health parameter (such as cpu and memory) goes out of normal range. Email notifications are enabled from Configuration -> Telemetry</p><ol><li><p>Enable notification under Configuration -> Telemtry tab. Select <strong>Enable email notification</strong> checkbox.
<img src=/img/telemetry/email-enable.png alt=notification-enable></p></li><li><p>Once selected, email settings related fields will appear. Specify email server and username details. Click on the <strong>Update</strong> button.</p></li><li><p>By default, reef-pi will show gmail specific details. If you are a gmail user, you can obtain a password <a href=https://security.google.com/settings/security/apppasswords>here</a>. reef-pi also limits the number of alerts of individual types to a certain value (by default it is set to 10). Users can update this value as well.
<img src=/img/telemetry/email-settings.png alt=notification-enable></p></li><li><p>That&rsquo;s it. reef-pi is now configured to send email alerts. You can use individual module specific tabs (such as temperature or ato) to specify individual alert thresholds. Note: if alert is disabled from configuration tab, then reef-pi will not dispatch alert, even if alert thresholds are configured at individual modules or tabs.</p></li></ol><h3 id=built-in-dashboard>Built-in dashboard</h3><p>reef-pi comes with its own built-in dashboard that charts past seven days of telemetry data and few other relevant information. This data is transient and is lost everytime reef-pi is restarted. The dashboard reconfigures itself automatically based on the capabilities enabled (Configuration -> Settings -> Capabilities). Inside reef-pi dashboard feature itself modeled as a capability, and can be enabled or disabled from the configuration tab. Following is a brief overview of the charts provided in the dashboard and what they reflect:</p><ol><li><p><strong>Equipment</strong>: The equipment chart is a <a href=https://en.wikipedia.org/wiki/Bar_chart>bar chart</a> where each vertical bar represents an individual equipment and the color of the bar indicates whether the equipment is on (green color) or off (gray).
<img src=/img/telemetry/equipment-chart.png alt=equipment-chart></p></li><li><p><strong>Temperature</strong>: There are two temperature chart in the dashboard. First one shows past 180 readings and the second one shows hourly usage of temperature control device (heater and cooler) for past seven days along with average temperature. If temperature controller is configured to check sensor after every one minute, the first chart will show last three hours temperature. Temperature charts help us understand temperature fluctuation in the tank as well as how efficient heater cooler device to adjust tank temperature.
Temperature readings chart:
<img src=/img/telemetry/temperature-chart.png alt="temperature reading">
Temperature controller equipment usage chart:
<img src=/img/telemetry/temperature-usage.png alt="temperature usage"></p></li><li><p><strong>ATO</strong>: The ato chart shows hourly ato pump usage, where the usage metric stands for the total number of seconds ato pump was turned on. ATO chart can be used to understand the evaporation rate and ATO pumps capability to how quickly it can adjust the water level.
<img src=/img/telemetry/ato-chart.png alt="ato chart"></p></li><li><p><strong>Lighting</strong>: The lighting charts are made of one chart for each light. Each chart has one line per channel lighting values. For fixed value lighting (i.e. lights that are not under day-light cycle or <strong>auto</strong> mode), these charts are not useful.
<img src=/img/telemetry/light-chart.png alt="light chart"></p></li><li><p><strong>Controller health</strong>: This chart shows past seven days CPU and Memory usage of the controller. We recommend to run reef-pi under 1/3rd of the CPU/Memory usage. i.e. For Raspberry Pi 3 based controller normal CPU usage should not go above 0.3 and normal Memory usage should not go above 300 MB. This gives enough room for scenarios when the controller has to work harder, even with double workload, it will have 1/3rd of spare cpu/memory. Usually CPU and memory is usage increases with individual subsystem being enabled, higher number of equipment being controlled or higher frequency of sensor checks.
<img src=/img/telemetry/health-chart.png alt="health chart"></p></li></ol></div></div></div></div></div><footer class=footer><div class=container><div class=text-muted>2016-20 &copy; Ranjib Dey, All rights reserved. Site powered by <a href=https://gohugo.io/>Hugo</a> and
<a href=http://www.github.com/nurlansu/hugo-sustain/>sustain</a> with ♥</div></div></footer><script src=https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta2/dist/js/bootstrap.min.js integrity=sha384-nsg8ua9HAw1y0W1btsyWgBklPnCUAFLuTMS2G72MMONqmOymq585AcH49TLBQObG crossorigin=anonymous></script></body></html>